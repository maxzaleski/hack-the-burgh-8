import { OnboardingHeader, WhiteButton } from '../common';
import React from 'react';
import { OnboardingInput } from '../common/OnboardingInput';
import { API_EVENT_PATH } from '@lib/common';
import { useAuth } from '@hooks';

export const CreateEventStep = (props) => {
  const [title, setTitle] = React.useState('');
  const [loading, setLoading] = React.useState(false);
  const { firebaseUser } = useAuth();

  const handleSubmit = () => {
    if (title) {
      setLoading(true);
      fetch(API_EVENT_PATH, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          title,
          imgUrl: undefined,
        }),
      }).finally(() => setLoading(false));
    }
  };

  return (
    <OnboardingHeader step="1/2">
      <div className="flex flex-col w-full">
        <svg
          width="255"
          height="132"
          viewBox="0 0 255 132"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="mb-[48px]">
          <g clipPath="url(#clip0_67_245)">
            <path
              d="M2.54282 52.4384V12.9863H19.5719C22.5 12.9863 25.0621 13.5192 27.2581 14.5852C29.4542 15.6511 31.1622 17.1858 32.3823 19.1892C33.6023 21.1926 34.2123 23.5942 34.2123 26.3939C34.2123 29.2192 33.5831 31.6014 32.3245 33.5407C31.0788 35.4799 29.3258 36.9439 27.0655 37.9328C24.8181 38.9217 22.1918 39.4161 19.1867 39.4161H9.01542V31.0941H17.0291C18.2877 31.0941 19.3601 30.9401 20.2462 30.6319C21.1451 30.3108 21.8322 29.8035 22.3074 29.11C22.7954 28.4165 23.0394 27.5112 23.0394 26.3939C23.0394 25.2637 22.7954 24.3455 22.3074 23.6391C21.8322 22.92 21.1451 22.3934 20.2462 22.0595C19.3601 21.7127 18.2877 21.5394 17.0291 21.5394H13.2534V52.4384H2.54282ZM25.6593 34.3305L35.5223 52.4384H23.887L14.2551 34.3305H25.6593ZM51.3894 52.9778C48.2302 52.9778 45.5075 52.3742 43.2216 51.167C40.9485 49.9469 39.1955 48.2004 37.9626 45.9272C36.7426 43.6413 36.1326 40.9058 36.1326 37.7209C36.1326 34.6644 36.749 31.9932 37.9818 29.7072C39.2148 27.4212 40.9549 25.6425 43.2023 24.3712C45.4498 23.0997 48.1017 22.4641 51.1582 22.4641C53.3928 22.4641 55.4155 22.8108 57.2263 23.5043C59.0371 24.1978 60.5846 25.206 61.8689 26.5287C63.1531 27.8386 64.142 29.4311 64.8354 31.3061C65.529 33.1811 65.8757 35.2936 65.8757 37.6439V40.1096H39.4459V34.2535H56.0897C56.0769 33.4059 55.8586 32.661 55.4348 32.0189C55.0238 31.3638 54.4652 30.8566 53.7588 30.497C53.0654 30.1246 52.2755 29.9383 51.3894 29.9383C50.529 29.9383 49.7391 30.1246 49.0199 30.497C48.3008 30.8566 47.7229 31.3574 47.2862 31.9996C46.8624 32.6417 46.6377 33.393 46.612 34.2535V40.5719C46.612 41.5222 46.8111 42.3698 47.2092 43.1147C47.6073 43.8596 48.1787 44.444 48.9236 44.8677C49.6685 45.2916 50.5675 45.5034 51.6206 45.5034C52.3526 45.5034 53.0204 45.4007 53.624 45.1952C54.2404 44.9898 54.767 44.6944 55.2036 44.3091C55.6403 43.911 55.9613 43.4358 56.1668 42.8836H65.8757C65.5418 44.9383 64.752 46.7235 63.5063 48.2389C62.2605 49.7414 60.6102 50.9101 58.5555 51.7449C56.5135 52.5667 54.1248 52.9778 51.3894 52.9778ZM83.385 64.1507C80.4185 64.1507 77.8757 63.7269 75.7566 62.8793C73.6505 62.0445 72.0131 60.8887 70.8444 59.4118C69.6886 57.9478 69.04 56.2655 68.8988 54.3648H79.147C79.2497 54.994 79.5066 55.5013 79.9176 55.8865C80.3285 56.2719 80.8551 56.548 81.4972 56.7149C82.1522 56.8947 82.8842 56.9846 83.6933 56.9846C85.0674 56.9846 86.204 56.6507 87.1029 55.9829C88.0147 55.3151 88.4707 54.1079 88.4707 52.3613V47.3527H88.1624C87.7772 48.3545 87.1865 49.2085 86.3902 49.9148C85.594 50.6084 84.6371 51.1412 83.5199 51.5137C82.4026 51.8733 81.1761 52.0531 79.8406 52.0531C77.7344 52.0531 75.7951 51.5651 74.0229 50.589C72.2635 49.613 70.8508 48.0655 69.7849 45.9465C68.7318 43.8275 68.2052 41.06 68.2052 37.6439C68.2052 34.0736 68.7575 31.1713 69.8619 28.9367C70.9792 26.7021 72.4176 25.0646 74.177 24.0244C75.9493 22.9842 77.8114 22.4641 79.7634 22.4641C81.2275 22.4641 82.5118 22.7209 83.6162 23.2346C84.7207 23.7354 85.6453 24.4097 86.3902 25.2573C87.135 26.0921 87.7001 27.0103 88.0854 28.012H88.3166V22.8493H98.9503V52.3613C98.9503 54.8656 98.3011 56.991 97.0046 58.7376C95.7199 60.4971 93.9099 61.839 91.5718 62.7638C89.2348 63.6884 86.5058 64.1507 83.385 64.1507ZM83.7703 44.5017C84.7464 44.5017 85.5811 44.232 86.2746 43.6926C86.981 43.1404 87.5203 42.357 87.8928 41.3425C88.278 40.3151 88.4707 39.0822 88.4707 37.6439C88.4707 36.1798 88.278 34.9277 87.8928 33.8874C87.5203 32.8344 86.981 32.0317 86.2746 31.4795C85.5811 30.9144 84.7464 30.6319 83.7703 30.6319C82.7943 30.6319 81.9595 30.9144 81.2661 31.4795C80.5854 32.0317 80.0588 32.8344 79.6864 33.8874C79.3269 34.9277 79.147 36.1798 79.147 37.6439C79.147 39.1079 79.3269 40.3536 79.6864 41.381C80.0588 42.3955 80.5854 43.1725 81.2661 43.7119C81.9595 44.2385 82.7943 44.5017 83.7703 44.5017ZM103.274 52.4384V22.8493H113.907V52.4384H103.274ZM108.59 19.7671C107.151 19.7671 105.919 19.292 104.891 18.3416C103.864 17.3913 103.351 16.2483 103.351 14.9127C103.351 13.577 103.864 12.434 104.891 11.4837C105.919 10.5334 107.151 10.0582 108.59 10.0582C110.042 10.0582 111.274 10.5334 112.289 11.4837C113.317 12.434 113.83 13.577 113.83 14.9127C113.83 16.2483 113.317 17.3913 112.289 18.3416C111.274 19.292 110.042 19.7671 108.59 19.7671ZM145.286 32.4811H135.501C135.449 31.8776 135.237 31.3574 134.864 30.9208C134.492 30.4841 134.011 30.1503 133.419 29.9191C132.842 29.6751 132.2 29.5531 131.494 29.5531C130.581 29.5531 129.799 29.7201 129.143 30.054C128.488 30.3879 128.167 30.8631 128.18 31.4795C128.167 31.9161 128.354 32.3207 128.739 32.6931C129.137 33.0655 129.901 33.3544 131.031 33.5599L137.041 34.6387C140.072 35.1909 142.326 36.122 143.803 37.432C145.292 38.729 146.044 40.4692 146.057 42.6524C146.044 44.7586 145.414 46.5886 144.169 48.1426C142.936 49.6836 141.247 50.878 139.103 51.7256C136.971 52.5603 134.537 52.9778 131.802 52.9778C127.281 52.9778 123.743 52.0531 121.188 50.2038C118.645 48.3545 117.225 45.9144 116.93 42.8836H127.487C127.628 43.821 128.09 44.5467 128.874 45.0604C129.67 45.5613 130.672 45.8117 131.879 45.8117C132.854 45.8117 133.657 45.6447 134.287 45.3108C134.928 44.9769 135.257 44.5017 135.269 43.8853C135.257 43.3202 134.974 42.8707 134.421 42.5368C133.882 42.2029 133.034 41.9332 131.879 41.7277L126.639 40.8031C123.621 40.2766 121.36 39.2748 119.858 37.7979C118.355 36.3211 117.611 34.4204 117.624 32.0959C117.611 30.0411 118.15 28.301 119.242 26.8755C120.346 25.437 121.919 24.3455 123.962 23.6006C126.016 22.8429 128.45 22.4641 131.262 22.4641C135.539 22.4641 138.91 23.3502 141.376 25.1224C143.855 26.8947 145.158 29.3476 145.286 32.4811ZM166.692 22.8493V30.5548H147.197V22.8493H166.692ZM150.973 15.7603H161.606V42.9221C161.606 43.3331 161.677 43.6798 161.818 43.9623C161.959 44.232 162.177 44.4375 162.473 44.5788C162.769 44.7072 163.148 44.7714 163.61 44.7714C163.93 44.7714 164.303 44.7329 164.727 44.6558C165.164 44.5788 165.485 44.5146 165.69 44.4632L167.231 51.9375C166.756 52.0788 166.075 52.2521 165.189 52.4576C164.316 52.6631 163.276 52.7979 162.068 52.8622C159.629 52.9906 157.58 52.7402 155.924 52.1109C154.266 51.4688 153.021 50.4606 152.186 49.0865C151.352 47.7123 150.947 45.9914 150.973 43.9238V15.7603ZM183.806 52.9778C180.647 52.9778 177.924 52.3742 175.639 51.167C173.365 49.9469 171.612 48.2004 170.379 45.9272C169.159 43.6413 168.55 40.9058 168.55 37.7209C168.55 34.6644 169.166 31.9932 170.398 29.7072C171.632 27.4212 173.372 25.6425 175.619 24.3712C177.866 23.0997 180.518 22.4641 183.575 22.4641C185.81 22.4641 187.832 22.8108 189.643 23.5043C191.454 24.1978 193.001 25.206 194.286 26.5287C195.57 27.8386 196.559 29.4311 197.252 31.3061C197.946 33.1811 198.292 35.2936 198.292 37.6439V40.1096H171.862V34.2535H188.507C188.493 33.4059 188.275 32.661 187.851 32.0189C187.441 31.3638 186.882 30.8566 186.175 30.497C185.482 30.1246 184.692 29.9383 183.806 29.9383C182.946 29.9383 182.155 30.1246 181.437 30.497C180.718 30.8566 180.139 31.3574 179.703 31.9996C179.28 32.6417 179.054 33.393 179.029 34.2535V40.5719C179.029 41.5222 179.228 42.3698 179.626 43.1147C180.024 43.8596 180.596 44.444 181.34 44.8677C182.085 45.2916 182.985 45.5034 184.037 45.5034C184.769 45.5034 185.437 45.4007 186.04 45.1952C186.657 44.9898 187.184 44.6944 187.62 44.3091C188.057 43.911 188.378 43.4358 188.584 42.8836H198.292C197.958 44.9383 197.169 46.7235 195.923 48.2389C194.677 49.7414 193.027 50.9101 190.972 51.7449C188.93 52.5667 186.541 52.9778 183.806 52.9778ZM201.547 52.4384V22.8493H211.872V28.4743H212.18C212.72 26.3939 213.573 24.872 214.742 23.9088C215.924 22.9457 217.305 22.4641 218.884 22.4641C219.346 22.4641 219.803 22.5026 220.252 22.5796C220.714 22.6439 221.157 22.7402 221.581 22.8686V31.9417C221.055 31.762 220.406 31.6271 219.635 31.5372C218.865 31.4474 218.203 31.4024 217.651 31.4024C216.611 31.4024 215.674 31.64 214.839 32.1152C214.016 32.5775 213.368 33.2325 212.893 34.0801C212.418 34.9148 212.18 35.8972 212.18 37.0274V52.4384H201.547ZM10.9418 118.9C9.05394 118.9 7.38442 118.592 5.93323 117.976C4.49487 117.347 3.36473 116.396 2.54282 115.125C1.7209 113.854 1.30994 112.235 1.30994 110.271C1.30994 108.652 1.58605 107.272 2.13828 106.129C2.6905 104.973 3.46105 104.029 4.44993 103.297C5.43879 102.565 6.58819 102.006 7.89813 101.621C9.22093 101.236 10.6464 100.985 12.1747 100.87C13.8313 100.741 15.1606 100.588 16.1622 100.408C17.1768 100.215 17.9088 99.952 18.3583 99.6175C18.8078 99.2712 19.0325 98.8147 19.0325 98.2496V98.1727C19.0325 97.4024 18.7371 96.8121 18.1464 96.4007C17.5556 95.9893 16.7979 95.7841 15.8733 95.7841C14.8588 95.7841 14.0304 96.0092 13.3882 96.4586C12.759 96.8952 12.3802 97.5697 12.2517 98.4811H2.46576C2.59419 96.6828 3.16568 95.0264 4.18023 93.5112C5.20763 91.9832 6.70377 90.7627 8.66867 89.8511C10.6336 88.9264 13.0865 88.4641 16.0274 88.4641C18.1464 88.4641 20.0471 88.7145 21.7295 89.2154C23.4118 89.7033 24.8438 90.3904 26.0253 91.2762C27.2067 92.1496 28.1057 93.1775 28.7222 94.3583C29.3515 95.5273 29.6661 96.7985 29.6661 98.1727V118.438H19.7261V114.278H19.4949C18.9041 115.382 18.1849 116.275 17.3373 116.955C16.5025 117.636 15.5458 118.13 14.467 118.438C13.4011 118.747 12.226 118.9 10.9418 118.9ZM14.4093 112.197C15.2183 112.197 15.9761 112.03 16.6824 111.696C17.4016 111.362 17.9859 110.881 18.4353 110.252C18.8849 109.622 19.1096 108.858 19.1096 107.959V105.493C18.8271 105.609 18.5253 105.718 18.2042 105.821C17.896 105.924 17.5621 106.02 17.2025 106.11C16.8558 106.199 16.4833 106.283 16.0852 106.36C15.7 106.437 15.2954 106.508 14.8716 106.572C14.0497 106.7 13.3754 106.912 12.8489 107.208C12.3352 107.491 11.9499 107.843 11.693 108.267C11.4491 108.679 11.3271 109.14 11.3271 109.654C11.3271 110.476 11.616 111.105 12.1939 111.542C12.7718 111.979 13.5103 112.197 14.4093 112.197ZM44.2955 101.795V118.438H33.662V88.8493H43.7561V94.474H44.0644C44.7065 92.5989 45.8366 91.1288 47.4548 90.063C49.0857 88.997 50.9865 88.4641 53.1569 88.4641C55.2501 88.4641 57.0674 88.9457 58.6085 89.9088C60.1624 90.8594 61.3632 92.1695 62.2108 93.8384C63.0712 95.5083 63.495 97.4151 63.4822 99.5597V118.438H52.8486V101.795C52.8615 100.331 52.489 99.1808 51.7313 98.3463C50.9865 97.5118 49.9462 97.0941 48.6106 97.0941C47.7374 97.0941 46.9732 97.2867 46.3183 97.6719C45.6761 98.0444 45.1817 98.5841 44.8349 99.2902C44.4882 99.9837 44.3083 100.818 44.2955 101.795Z"
              fill="white"
            />
            <path d="M254.959 74.7728H81.3699V131.364H254.959V74.7728Z" fill="white" />
            <path
              d="M89.744 120.555V85.8714H114.741V93.4587H99.1601V99.4195H113.453V107.007H99.1601V112.968H114.673V120.555H89.744ZM127.94 85.8714L135.053 110.326H135.324L142.437 85.8714H153.072L141.623 120.555H128.753L117.305 85.8714H127.94ZM155.458 120.555V85.8714H180.455V93.4587H164.874V99.4195H179.167V107.007H164.874V112.968H180.387V120.555H155.458ZM214.18 85.8714V120.555H206.321L193.79 102.333H193.586V120.555H184.171V85.8714H192.164L204.492 104.026H204.764V85.8714H214.18ZM216.731 93.4587V85.8714H246.876V93.4587H236.444V120.555H227.164V93.4587H216.731Z"
              fill="#171717"
            />
          </g>
          <defs>
            <clipPath id="clip0_67_245">
              <rect width="254.959" height="132" fill="white" />
            </clipPath>
          </defs>
        </svg>

        <OnboardingInput
          label="Title"
          placeholder="Acme Social"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
        />
        <WhiteButton
          title={loading ? 'Creating your event...' : 'Continue'}
          disabled={!title || loading}
          onClick={handleSubmit}
        />
      </div>
    </OnboardingHeader>
  );
};
